document.addEventListener("DOMContentLoaded",e=>{initMap(),fetchNeighborhoods(),fetchCuisines()}),fetchNeighborhoods=(()=>{DBHelper.fetchNeighborhoods((e,t)=>{e?console.error(e):(self.neighborhoods=t,fillNeighborhoodsHTML())})}),fillNeighborhoodsHTML=((e=self.neighborhoods)=>{const t=document.getElementById("neighborhoods-select");e.forEach(e=>{const a=document.createElement("option");a.innerHTML=e,a.value=e,t.append(a)})}),fetchCuisines=(()=>{DBHelper.fetchCuisines((e,t)=>{e?console.error(e):(self.cuisines=t,fillCuisinesHTML())})}),fillCuisinesHTML=((e=self.cuisines)=>{const t=document.getElementById("cuisines-select");e.forEach(e=>{const a=document.createElement("option");a.innerHTML=e,a.value=e,t.append(a)})}),initMap=(()=>{self.newMap=L.map("map",{center:[40.722216,-73.987501],zoom:12,scrollWheelZoom:!1}),L.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.jpg70?access_token={mapboxToken}",{mapboxToken:"pk.eyJ1IjoiaW12cG4yMiIsImEiOiJjaml2bnlycGExM3FuM3FxbTc0eWM2NHV2In0.ESs374xN3guFAGO_1EPdmQ",maxZoom:18,attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox.streets"}).addTo(newMap),updateRestaurants()}),updateRestaurants=(()=>{const e=document.getElementById("cuisines-select"),t=document.getElementById("neighborhoods-select"),a=e.selectedIndex,s=t.selectedIndex,n=e[a].value,r=t[s].value;DBHelper.fetchRestaurantByCuisineAndNeighborhood(n,r,(e,t)=>{e?console.error(e):(resetRestaurants(t),fillRestaurantsHTML())})}),resetRestaurants=(e=>{self.restaurants=[],document.getElementById("restaurants-list").innerHTML="",self.markers&&self.markers.forEach(e=>e.remove()),self.markers=[],self.restaurants=e}),fillRestaurantsHTML=((e=self.restaurants)=>{const t=document.getElementById("restaurants-list");e.forEach(e=>{t.append(createRestaurantHTML(e))}),addMarkersToMap()}),createRestaurantHTML=(e=>{const t=document.createElement("li");t.setAttribute("tabindex",0);const a=document.createElement("img");a.src=DBHelper.imageUrlForRestaurant(e),a.className="restaurant-img","http://localhost:8080/no-image"==a.src&&(a.src="",a.classList.add("fallback-image-icon")),a.alt=`${e.name} restaurant image`,a.setAttribute("tabindex",0),t.append(a);const s=document.createElement("div");s.className="restaurant-details",t.append(s);const n=document.createElement("h2");n.innerHTML=e.name,n.setAttribute("tabindex",0),s.append(n);const r=document.createElement("p");r.innerHTML=e.neighborhood,r.setAttribute("tabindex",0),s.append(r);const o=document.createElement("p");o.className="rest-address",o.innerHTML="<i class='fa fa-map-marker'></i>"+e.address,o.setAttribute("tabindex",0),s.append(o);const i=document.createElement("a");return i.innerHTML="View Details",i.href=DBHelper.urlForRestaurant(e),i.setAttribute("aria-label",`View details of ${e.name}`),s.append(i),t}),addMarkersToMap=((e=self.restaurants)=>{e.forEach(e=>{const t=DBHelper.mapMarkerForRestaurant(e,self.newMap);t.on("click",function(){window.location.href=t.options.url}),self.markers.push(t)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJpbml0TWFwIiwiZmV0Y2hOZWlnaGJvcmhvb2RzIiwiZmV0Y2hDdWlzaW5lcyIsIkRCSGVscGVyIiwiZXJyb3IiLCJuZWlnaGJvcmhvb2RzIiwiY29uc29sZSIsInNlbGYiLCJmaWxsTmVpZ2hib3Job29kc0hUTUwiLCJzZWxlY3QiLCJnZXRFbGVtZW50QnlJZCIsImZvckVhY2giLCJuZWlnaGJvcmhvb2QiLCJvcHRpb24iLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwidmFsdWUiLCJhcHBlbmQiLCJjdWlzaW5lcyIsImZpbGxDdWlzaW5lc0hUTUwiLCJjdWlzaW5lIiwibmV3TWFwIiwiTCIsIm1hcCIsImNlbnRlciIsInpvb20iLCJzY3JvbGxXaGVlbFpvb20iLCJ0aWxlTGF5ZXIiLCJtYXBib3hUb2tlbiIsIm1heFpvb20iLCJhdHRyaWJ1dGlvbiIsImlkIiwiYWRkVG8iLCJ1cGRhdGVSZXN0YXVyYW50cyIsImNTZWxlY3QiLCJuU2VsZWN0IiwiY0luZGV4Iiwic2VsZWN0ZWRJbmRleCIsIm5JbmRleCIsImZldGNoUmVzdGF1cmFudEJ5Q3Vpc2luZUFuZE5laWdoYm9yaG9vZCIsInJlc3RhdXJhbnRzIiwicmVzZXRSZXN0YXVyYW50cyIsImZpbGxSZXN0YXVyYW50c0hUTUwiLCJtYXJrZXJzIiwibWFya2VyIiwicmVtb3ZlIiwidWwiLCJyZXN0YXVyYW50IiwiY3JlYXRlUmVzdGF1cmFudEhUTUwiLCJhZGRNYXJrZXJzVG9NYXAiLCJsaSIsInNldEF0dHJpYnV0ZSIsImltYWdlIiwic3JjIiwiaW1hZ2VVcmxGb3JSZXN0YXVyYW50IiwiY2xhc3NOYW1lIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWx0IiwibmFtZSIsImRldGFpbHMiLCJhZGRyZXNzIiwibW9yZSIsImhyZWYiLCJ1cmxGb3JSZXN0YXVyYW50IiwibWFwTWFya2VyRm9yUmVzdGF1cmFu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LGFBQWEsV0FBWSxHQUM5QlMsRUFBUTNDLE9BQU8wQyxHQUVmLE1BQU0vQyxFQUFlZixTQUFTaUIsY0FBYyxLQUM1Q0YsRUFBYUcsVUFBWWdDLEVBQVduQyxhQUNwQ0EsRUFBYXVDLGFBQWEsV0FBWSxHQUN0Q1MsRUFBUTNDLE9BQU9MLEdBRWYsTUFBTWlELEVBQVVoRSxTQUFTaUIsY0FBYyxLQUN2QytDLEVBQVFOLFVBQVksZUFDcEJNLEVBQVE5QyxVQUFZLG1DQUF1Q2dDLEVBQVdjLFFBQ3RFQSxFQUFRVixhQUFhLFdBQVksR0FDakNTLEVBQVEzQyxPQUFPNEMsR0FFZixNQUFNQyxFQUFPakUsU0FBU2lCLGNBQWMsS0FNcEMsT0FMQWdELEVBQUsvQyxVQUFZLGVBQ2pCK0MsRUFBS0MsS0FBTzVELFNBQVM2RCxpQkFBaUJqQixHQUN0Q2UsRUFBS1gsYUFBYSxnQ0FBaUNKLEVBQVdZLFFBQzlEQyxFQUFRM0MsT0FBTzZDLEdBRVJaLElBTVBELGdCQUFrQixFQUFDVCxFQUFjakMsS0FBS2lDLGVBQ3RDQSxFQUFZN0IsUUFBUW9DLElBRW5CLE1BQU1ILEVBQVN6QyxTQUFTOEQsdUJBQXVCbEIsRUFBWXhDLEtBQUtjLFFBQ2hFdUIsRUFBT3NCLEdBQUcsUUFDVixXQUNDQyxPQUFPQyxTQUFTTCxLQUFPbkIsRUFBT3lCLFFBQVFDLE1BRXZDL0QsS0FBS29DLFFBQVE0QixLQUFLM0IiLCJzb3VyY2VzQ29udGVudCI6WyIvLyB2YXIgcmVzdGF1cmFudHM7XG4vLyB2YXIgbmVpZ2hib3Job29kcztcbi8vIHZhciBjdWlzaW5lcztcbi8vIHZhciBuZXdNYXA7XG4vLyB2YXIgbWFya2VycyA9IFtdO1xuXG4vKipcbiAqIEZldGNoIG5laWdoYm9yaG9vZHMgYW5kIGN1aXNpbmVzIGFzIHNvb24gYXMgdGhlIHBhZ2UgaXMgbG9hZGVkLlxuICovXG4gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIChldmVudCkgPT4ge1xuXHRpbml0TWFwKCk7IC8vIGFkZGVkXG5cdGZldGNoTmVpZ2hib3Job29kcygpO1xuXHRmZXRjaEN1aXNpbmVzKCk7XG59KTtcblxuLyoqXG4gKiBGZXRjaCBhbGwgbmVpZ2hib3Job29kcyBhbmQgc2V0IHRoZWlyIEhUTUwuXG4gKi9cbiBmZXRjaE5laWdoYm9yaG9vZHMgPSAoKSA9PiB7XG5cdERCSGVscGVyLmZldGNoTmVpZ2hib3Job29kcygoZXJyb3IsIG5laWdoYm9yaG9vZHMpID0+IHtcblx0XHRpZiAoZXJyb3IpIHsgLy8gR290IGFuIGVycm9yXG5cdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c2VsZi5uZWlnaGJvcmhvb2RzID0gbmVpZ2hib3Job29kcztcblx0XHRcdGZpbGxOZWlnaGJvcmhvb2RzSFRNTCgpO1xuXHRcdH1cblx0fSk7XG4gfTtcblxuLyoqXG4gKiBTZXQgbmVpZ2hib3Job29kcyBIVE1MLlxuICovXG4gZmlsbE5laWdoYm9yaG9vZHNIVE1MID0gKG5laWdoYm9yaG9vZHMgPSBzZWxmLm5laWdoYm9yaG9vZHMpID0+IHtcblx0Y29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25laWdoYm9yaG9vZHMtc2VsZWN0Jyk7XG5cdG5laWdoYm9yaG9vZHMuZm9yRWFjaChuZWlnaGJvcmhvb2QgPT4ge1xuXHRcdGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuXHRcdG9wdGlvbi5pbm5lckhUTUwgPSBuZWlnaGJvcmhvb2Q7XG5cdFx0b3B0aW9uLnZhbHVlID0gbmVpZ2hib3Job29kO1xuXHRcdHNlbGVjdC5hcHBlbmQob3B0aW9uKTtcblx0fSk7XG4gfTtcblxuLyoqXG4gKiBGZXRjaCBhbGwgY3Vpc2luZXMgYW5kIHNldCB0aGVpciBIVE1MLlxuICovXG4gZmV0Y2hDdWlzaW5lcyA9ICgpID0+IHtcblx0REJIZWxwZXIuZmV0Y2hDdWlzaW5lcygoZXJyb3IsIGN1aXNpbmVzKSA9PiB7XG5cdFx0aWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvciFcblx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzZWxmLmN1aXNpbmVzID0gY3Vpc2luZXM7XG5cdFx0XHRmaWxsQ3Vpc2luZXNIVE1MKCk7XG5cdFx0fVxuXHR9KTtcbiB9O1xuXG4vKipcbiAqIFNldCBjdWlzaW5lcyBIVE1MLlxuICovXG4gZmlsbEN1aXNpbmVzSFRNTCA9IChjdWlzaW5lcyA9IHNlbGYuY3Vpc2luZXMpID0+IHtcblx0Y29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1aXNpbmVzLXNlbGVjdCcpO1xuXG5cdGN1aXNpbmVzLmZvckVhY2goY3Vpc2luZSA9PiB7XG5cdFx0Y29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG5cdFx0b3B0aW9uLmlubmVySFRNTCA9IGN1aXNpbmU7XG5cdFx0b3B0aW9uLnZhbHVlID0gY3Vpc2luZTtcblx0XHRzZWxlY3QuYXBwZW5kKG9wdGlvbik7XG5cdH0pO1xuIH07XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBsZWFmbGV0IG1hcCwgY2FsbGVkIGZyb20gSFRNTC5cbiAqL1xuIGluaXRNYXAgPSAoKSA9PiB7XG5cdHNlbGYubmV3TWFwID0gTC5tYXAoJ21hcCcsIHtcblx0XHRjZW50ZXI6IFs0MC43MjIyMTYsIC03My45ODc1MDFdLFxuXHRcdHpvb206IDEyLFxuXHRcdHNjcm9sbFdoZWVsWm9vbTogZmFsc2Vcblx0fSk7XG5cdEwudGlsZUxheWVyKCdodHRwczovL2FwaS50aWxlcy5tYXBib3guY29tL3Y0L3tpZH0ve3p9L3t4fS97eX0uanBnNzA/YWNjZXNzX3Rva2VuPXttYXBib3hUb2tlbn0nLCB7XG5cdFx0bWFwYm94VG9rZW46ICdway5leUoxSWpvaWFXMTJjRzR5TWlJc0ltRWlPaUpqYW1sMmJubHljR0V4TTNGdU0zRnhiVGMwZVdNMk5IVjJJbjAuRVNzMzc0eE4zZ3VGQUdPXzFFUGRtUScsXG5cdFx0bWF4Wm9vbTogMTgsXG5cdFx0YXR0cmlidXRpb246ICdNYXAgZGF0YSAmY29weTsgPGEgaHJlZj1cImh0dHBzOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL1wiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycywgJyArXG5cdFx0JzxhIGhyZWY9XCJodHRwczovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktc2EvMi4wL1wiPkNDLUJZLVNBPC9hPiwgJyArXG5cdFx0J0ltYWdlcnkgwqkgPGEgaHJlZj1cImh0dHBzOi8vd3d3Lm1hcGJveC5jb20vXCI+TWFwYm94PC9hPicsXG5cdFx0aWQ6ICdtYXBib3guc3RyZWV0cydcblx0fSkuYWRkVG8obmV3TWFwKTtcblxuXHR1cGRhdGVSZXN0YXVyYW50cygpO1xuIH07XG4vKiB3aW5kb3cuaW5pdE1hcCA9ICgpID0+IHtcbiAgbGV0IGxvYyA9IHtcblx0bGF0OiA0MC43MjIyMTYsXG5cdGxuZzogLTczLjk4NzUwMVxuICB9O1xuICBzZWxmLm1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7XG5cdHpvb206IDEyLFxuXHRjZW50ZXI6IGxvYyxcblx0c2Nyb2xsd2hlZWw6IGZhbHNlXG4gIH0pO1xuICB1cGRhdGVSZXN0YXVyYW50cygpO1xufSAqL1xuXG4vKipcbiAqIFVwZGF0ZSBwYWdlIGFuZCBtYXAgZm9yIGN1cnJlbnQgcmVzdGFsaXN0dXJhbnRzLlxuICovXG4gdXBkYXRlUmVzdGF1cmFudHMgPSAoKSA9PiB7XG5cdGNvbnN0IGNTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3Vpc2luZXMtc2VsZWN0Jyk7XG5cdGNvbnN0IG5TZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmVpZ2hib3Job29kcy1zZWxlY3QnKTtcblxuXHRjb25zdCBjSW5kZXggPSBjU2VsZWN0LnNlbGVjdGVkSW5kZXg7XG5cdGNvbnN0IG5JbmRleCA9IG5TZWxlY3Quc2VsZWN0ZWRJbmRleDtcblxuXHRjb25zdCBjdWlzaW5lID0gY1NlbGVjdFtjSW5kZXhdLnZhbHVlO1xuXHRjb25zdCBuZWlnaGJvcmhvb2QgPSBuU2VsZWN0W25JbmRleF0udmFsdWU7XG5cblx0REJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50QnlDdWlzaW5lQW5kTmVpZ2hib3Job29kKGN1aXNpbmUsIG5laWdoYm9yaG9vZCwgKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xuXHRcdGlmIChlcnJvcikgeyAvLyBHb3QgYW4gZXJyb3IhXG5cdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVzZXRSZXN0YXVyYW50cyhyZXN0YXVyYW50cyk7XG5cdFx0XHRmaWxsUmVzdGF1cmFudHNIVE1MKCk7XG5cdFx0fVxuXHR9KTtcbiB9O1xuXG4vKipcbiAqIENsZWFyIGN1cnJlbnQgcmVzdGF1cmFudHMsIHRoZWlyIEhUTUwgYW5kIHJlbW92ZSB0aGVpciBtYXAgbWFya2Vycy5cbiAqL1xuIHJlc2V0UmVzdGF1cmFudHMgPSAocmVzdGF1cmFudHMpID0+IHtcblx0Ly8gUmVtb3ZlIGFsbCByZXN0YXVyYW50c1xuXHRzZWxmLnJlc3RhdXJhbnRzID0gW107XG5cdGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnRzLWxpc3QnKTtcblx0dWwuaW5uZXJIVE1MID0gJyc7XG5cblx0Ly8gUmVtb3ZlIGFsbCBtYXAgbWFya2Vyc1xuXHRpZiAoc2VsZi5tYXJrZXJzKSB7XG5cdFx0c2VsZi5tYXJrZXJzLmZvckVhY2gobWFya2VyID0+IG1hcmtlci5yZW1vdmUoKSk7XG5cdH1cblx0c2VsZi5tYXJrZXJzID0gW107XG5cdHNlbGYucmVzdGF1cmFudHMgPSByZXN0YXVyYW50cztcbn07XG5cbi8qKlxuICogQ3JlYXRlIGFsbCByZXN0YXVyYW50cyBIVE1MIGFuZCBhZGQgdGhlbSB0byB0aGUgd2VicGFnZS5cbiAqL1xuIGZpbGxSZXN0YXVyYW50c0hUTUwgPSAocmVzdGF1cmFudHMgPSBzZWxmLnJlc3RhdXJhbnRzKSA9PiB7XG5cdGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnRzLWxpc3QnKTtcblx0cmVzdGF1cmFudHMuZm9yRWFjaChyZXN0YXVyYW50ID0+IHtcblx0XHR1bC5hcHBlbmQoY3JlYXRlUmVzdGF1cmFudEhUTUwocmVzdGF1cmFudCkpO1xuXHR9KTtcblx0YWRkTWFya2Vyc1RvTWFwKCk7XG4gfTtcblxuLyoqXG4gKiBDcmVhdGUgcmVzdGF1cmFudCBIVE1MLlxuICovXG4gY3JlYXRlUmVzdGF1cmFudEhUTUwgPSAocmVzdGF1cmFudCkgPT4ge1xuXHRjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG5cdGxpLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAwKTtcblxuXHRjb25zdCBpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuXHRpbWFnZS5zcmMgPSBEQkhlbHBlci5pbWFnZVVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCk7XG5cdGltYWdlLmNsYXNzTmFtZSA9ICdyZXN0YXVyYW50LWltZyc7XG5cdGlmIChpbWFnZS5zcmMgPT0gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9uby1pbWFnZScpIHtcblx0XHRpbWFnZS5zcmMgPSAnJztcblx0XHRpbWFnZS5jbGFzc0xpc3QuYWRkKCdmYWxsYmFjay1pbWFnZS1pY29uJyk7XG5cdH1cblx0aW1hZ2UuYWx0ID0gYCR7cmVzdGF1cmFudC5uYW1lfSByZXN0YXVyYW50IGltYWdlYDtcblx0aW1hZ2Uuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsIDApO1xuXHRsaS5hcHBlbmQoaW1hZ2UpO1xuXG5cdGNvbnN0IGRldGFpbHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ZGV0YWlscy5jbGFzc05hbWUgPSAncmVzdGF1cmFudC1kZXRhaWxzJztcblx0bGkuYXBwZW5kKGRldGFpbHMpO1xuXG5cdGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMicpO1xuXHRuYW1lLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmFtZTtcblx0bmFtZS5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgMCk7XG5cdGRldGFpbHMuYXBwZW5kKG5hbWUpO1xuXG5cdGNvbnN0IG5laWdoYm9yaG9vZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcblx0bmVpZ2hib3Job29kLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmVpZ2hib3Job29kO1xuXHRuZWlnaGJvcmhvb2Quc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsIDApO1xuXHRkZXRhaWxzLmFwcGVuZChuZWlnaGJvcmhvb2QpO1xuXG5cdGNvbnN0IGFkZHJlc3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG5cdGFkZHJlc3MuY2xhc3NOYW1lID0gJ3Jlc3QtYWRkcmVzcyc7XG5cdGFkZHJlc3MuaW5uZXJIVE1MID0gJzxpIGNsYXNzPVxcJ2ZhIGZhLW1hcC1tYXJrZXJcXCc+PC9pPicgKyByZXN0YXVyYW50LmFkZHJlc3M7XG5cdGFkZHJlc3Muc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsIDApO1xuXHRkZXRhaWxzLmFwcGVuZChhZGRyZXNzKTtcblxuXHRjb25zdCBtb3JlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuXHRtb3JlLmlubmVySFRNTCA9ICdWaWV3IERldGFpbHMnO1xuXHRtb3JlLmhyZWYgPSBEQkhlbHBlci51cmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpO1xuXHRtb3JlLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGBWaWV3IGRldGFpbHMgb2YgJHtyZXN0YXVyYW50Lm5hbWV9YCk7XG5cdGRldGFpbHMuYXBwZW5kKG1vcmUpO1xuXG5cdHJldHVybiBsaTtcbiB9O1xuXG4vKipcbiAqIEFkZCBtYXJrZXJzIGZvciBjdXJyZW50IHJlc3RhdXJhbnRzIHRvIHRoZSBtYXAuXG4gKi9cbiBhZGRNYXJrZXJzVG9NYXAgPSAocmVzdGF1cmFudHMgPSBzZWxmLnJlc3RhdXJhbnRzKSA9PiB7XG5cdHJlc3RhdXJhbnRzLmZvckVhY2gocmVzdGF1cmFudCA9PiB7XG5cdFx0Ly8gQWRkIG1hcmtlciB0byB0aGUgbWFwXG5cdFx0Y29uc3QgbWFya2VyID0gREJIZWxwZXIubWFwTWFya2VyRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCBzZWxmLm5ld01hcCk7XG5cdFx0bWFya2VyLm9uKCdjbGljaycsIG9uQ2xpY2spO1xuXHRcdGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG5cdFx0XHR3aW5kb3cubG9jYXRpb24uaHJlZiA9IG1hcmtlci5vcHRpb25zLnVybDtcblx0XHR9XG5cdFx0c2VsZi5tYXJrZXJzLnB1c2gobWFya2VyKTtcblx0fSk7XG5cbiB9O1xuLyogYWRkTWFya2Vyc1RvTWFwID0gKHJlc3RhdXJhbnRzID0gc2VsZi5yZXN0YXVyYW50cykgPT4ge1xuICByZXN0YXVyYW50cy5mb3JFYWNoKHJlc3RhdXJhbnQgPT4ge1xuXHQvLyBBZGQgbWFya2VyIHRvIHRoZSBtYXBcblx0Y29uc3QgbWFya2VyID0gREJIZWxwZXIubWFwTWFya2VyRm9yUmVzdGF1cmFudChyZXN0YXVyYW50LCBzZWxmLm1hcCk7XG5cdGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcmtlciwgJ2NsaWNrJywgKCkgPT4ge1xuXHQgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gbWFya2VyLnVybFxuXHR9KTtcblx0c2VsZi5tYXJrZXJzLnB1c2gobWFya2VyKTtcbiAgfSk7XG59ICovXG5cblxuLyogTWFuYWdlIGZvY3VzIGFuZCB0YWJpbmRleCBvbiBmaWx0ZXIgb3B0aW9ucyAqL1xuXG5cblxuIl0sImZpbGUiOiJtYWluLW1pbi5qcyJ9
